# $Id: $
# Maintainer: Pablo Lezaeta <prflr88@gmail.com>

pkgname=firefox-tumblr-savior
pkgver=0.4.11
pkgrel=1
pkgdesc="Extension for firefox which block post with predefined tags from Tumblr"
arch=('any')
url="http://bjornstar.com/tumblr-savior"
license=('MIT')
source=("https://addons.mozilla.org/firefox/downloads/file/242508/tumblr_savior-0.4.11-fx.xpi")
md5sums=('7010aa4dd7b07d147c38e44a642d29d6')

package() {
	depends=("firefox")

	cd "${srcdir}"
	emid=$(sed -n '/.*<em:id>\(.*\)<\/em:id>.*/{s//\1/p;q}' install.rdf)
	local dstdir="${pkgdir}/usr/lib/firefox/browser/extensions/${emid}"
	install -d "${dstdir}"
	cp -dpr --no-preserve=ownership * "${dstdir}"
	rm -r "${dstdir}"/*.xpi
	find "${pkgdir}" -type d -exec chmod 0755 {} \;
	find "${pkgdir}" -type f -exec chmod 0644 {} \;
}
